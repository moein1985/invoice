<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>JsSIP Test</title>
</head>
<body>
  <h1>JsSIP Load Test</h1>
  <div id="status">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
  
  <script>
    console.log('ğŸ” Ø´Ø±ÙˆØ¹ ØªØ³Øª JsSIP...');
    
    // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ù„ÙˆØ¯ Ú©Ø±Ø¯Ù† JsSIP
    function loadJsSIP() {
      return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/jssip@3.10.0/dist/jssip.min.js';
        
        script.onload = function() {
          console.log('âœ… Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù„ÙˆØ¯ Ø´Ø¯');
          if (typeof JsSIP !== 'undefined') {
            console.log('âœ… JsSIP version ' + JsSIP.version + ' Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª');
            window.jsSipLoaded = true;
            resolve();
          } else {
            console.error('âŒ JsSIP object Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯');
            reject(new Error('JsSIP not found'));
          }
        };
        
        script.onerror = function() {
          console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª');
          reject(new Error('Failed to load'));
        };
        
        document.head.appendChild(script);
      });
    }

    // ØªØ³Øª
    loadJsSIP()
      .then(() => {
        document.getElementById('status').innerHTML = 'âœ… JsSIP Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ù„ÙˆØ¯ Ø´Ø¯!<br>Version: ' + JsSIP.version;
        console.log('âœ… ØªØ³Øª Ù…ÙˆÙÙ‚');
        
        // ØªØ³Øª Ø³Ø§Ø®Øª UA
        try {
          const socket = new JsSIP.WebSocketInterface('ws://192.168.85.88:5060');
          const config = {
            sockets: [socket],
            uri: 'sip:1010@192.168.85.88',
            password: 'Abc@1010',
            display_name: 'Invoice Test'
          };
          const ua = new JsSIP.UA(config);
          console.log('âœ… UA Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯:', ua);
          document.getElementById('status').innerHTML += '<br>âœ… UA Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯';
        } catch (e) {
          console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø³Ø§Ø®Øª UA:', e);
          document.getElementById('status').innerHTML += '<br>âŒ Ø®Ø·Ø§ Ø¯Ø± Ø³Ø§Ø®Øª UA: ' + e.message;
        }
      })
      .catch((error) => {
        document.getElementById('status').innerHTML = 'âŒ Ø®Ø·Ø§: ' + error.message;
        console.error('âŒ ØªØ³Øª Ù†Ø§Ù…ÙˆÙÙ‚:', error);
      });
  </script>
</body>
</html>
