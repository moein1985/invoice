<!DOCTYPE html>
<html>
<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="invoice">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>invoice</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <!-- Loading indicator -->
  <div id="loading" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 9999;">
    <div style="font-size: 18px; color: #666; margin-bottom: 10px;">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ… ØªÙ„ÙÙ†...</div>
    <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
  </div>
  <style>
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  
  <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Local JsSIP Ùˆ Ø³Ù¾Ø³ Flutter -->
  <script>
    console.log('ğŸ” [INDEX.HTML] Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡...');
    console.log('ğŸ” [INDEX.HTML] Ù…Ø³ÛŒØ± ÙØ¹Ù„ÛŒ:', window.location.href);
  </script>
  
  <script src="jssip.min.js" onerror="console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ jssip.min.js');" onload="console.log('ğŸ“¥ jssip.min.js Ù„ÙˆØ¯ Ø´Ø¯');"></script>
  
  <script>
    console.log('ğŸ” [INDEX.HTML] Ø¨Ø±Ø±Ø³ÛŒ JsSIP...');
    console.log('ğŸ” [INDEX.HTML] typeof JsSIP:', typeof JsSIP);
    console.log('ğŸ” [INDEX.HTML] window.JsSIP:', window.JsSIP);
    
    // Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªÙ†Ø¸ÛŒÙ… JsSIP
    if (typeof JsSIP !== 'undefined') {
      console.log('âœ… JsSIP version ' + JsSIP.version + ' loaded successfully from local file');
      window.jsSipLoaded = true;
      window.JsSIPLib = JsSIP;
    } else {
      console.error('âŒ JsSIP not loaded from local file');
      console.error('âŒ window object keys:', Object.keys(window).filter(k => k.toLowerCase().includes('js')));
      window.jsSipLoaded = false;
    }
    
    // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ù„ÙˆØ¯ Ú©Ø±Ø¯Ù† JsSIP (Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ)
    function loadJsSIP() {
      return new Promise((resolve, reject) => {
        if (typeof JsSIP !== 'undefined') {
          resolve();
        } else {
          reject(new Error('JsSIP not found'));
        }
      });
    }

    // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ù„ÙˆØ¯ Ú©Ø±Ø¯Ù† Flutter
    function loadFlutter() {
      const script = document.createElement('script');
      script.src = 'flutter_bootstrap.js';
      script.async = true;
      script.onload = function() {
        console.log('âœ… Flutter Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
        // Ø­Ø°Ù loading indicator Ø¨Ø¹Ø¯ Ø§Ø² 2 Ø«Ø§Ù†ÛŒÙ‡ (Ø²Ù…Ø§Ù† Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ù†Ø¯Ø± Ø§ÙˆÙ„ÛŒÙ‡ Flutter)
        setTimeout(() => {
          const loadingDiv = document.getElementById('loading');
          if (loadingDiv) {
            loadingDiv.style.display = 'none';
            console.log('âœ… Loading indicator Ù¾Ù†Ù‡Ø§Ù† Ø´Ø¯');
          }
        }, 2000);
      };
      document.body.appendChild(script);
    }

    // Ø§Ø¨ØªØ¯Ø§ JsSIP Ø±Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ Ø³Ù¾Ø³ Flutter
    loadJsSIP()
      .then(() => {
        console.log('âœ… JsSIP Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª - Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Flutter');
        loadFlutter();
      })
      .catch((error) => {
        console.error('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ JsSIP:', error);
        console.log('ğŸ”„ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Flutter Ø¨Ø¯ÙˆÙ† JsSIP...');
        window.jsSipLoaded = false;
        loadFlutter();
      });
  </script>
</body>
</html>
